{% extends 'base.html.twig' %}

{% block title %}arbre des livres{% endblock %}
{% block stylesheets %}<link rel="stylesheet" href="{{ asset('build/css/arbreStyle.css') }}">{% endblock %}
{% block body %}
    <div class="enTete">
        <img src="{{ asset('build/images/imgSonPlay.png') }}"  style="float:left; margin-top:10px; margin-left:10px;"  id="play"/>
        <div class="menu">
            <ul>
                <li><a href="{{ path('mainPage') }}">Accueil </a></li>
                <li> <a href="{{ path('showApropos') }}"> À propos</a></li>
                {% if app.user  %}
                    <li><a href="{{ path('showUser', {'id': app.user.id})  }}">Votre Profil </a></li>
                    <li><a href="{{ path('app_logout') }}">Se déconnecter</a></li>
                {% else %}
                    <li><a href="{{ path('app_login') }}">Se connecter </a></li>
                    <li><a href="{{ path('app_register') }}">S'inscrire</a></li>
                {% endif %}
            </ul>
        </div>
    </div>
    <div class="pageCenter">
        <h1> {{livre.titre}} </h1>
        <button class="avis" ><a class="tooltipped modal-trigger btn right-align" data-title="Ajouter un avis" data-target="avis_new" data-tooltip="voir" >Ajouter un avis </a></button>
        <button class="citation"><a class="tooltipped modal-trigger btn right-align" data-title="Ajouter une citation" data-target="citation_new" data-tooltip="voir" > Ajouter une citation</a></button>
        <p style="margin-left:40px;font-size:16px;font-weight:bold;"> <a href="{{ path('avis_index',{'idLivre':livre.id}) }}">Voir tous les avis</a>  <a href="{{ path('citation_index',{'idLivre':livre.id}) }}" style="margin-left:510px;">Voir toutes les citations</a>   </p><br>
        <button class="event"><a class="tooltipped modal-trigger btn right-align" data-title="Ajouter un évènement" data-target="evenement_new" data-tooltip="voir" >  Ajouter un évènement</a></button>
        <button class="document"> <a class="tooltipped modal-trigger btn right-align" data-title="Ajouter un document" data-target="document_new" data-tooltip="voir" >Ajouter un document</a></button>
        <p style="margin-left:10px;font-size:16px;font-weight:bold;"><a href="">Voir tous les évènements</a> <a href="{{ path('document_index') }}"  style="margin-left:700px;">Voir tous les Documents</a>   </p><br>
        <button class="image"> <a class="tooltipped modal-trigger btn right-align" data-title="Ajouter une image" data-target="image_new" data-tooltip="voir" > Ajouter une image</a></button>
        <button class="son"> <a class="tooltipped modal-trigger btn right-align" data-title="Ajouter un son" data-target="son_new" data-tooltip="voir" >Ajouter un son</a></button>
        <p style="font-size:16px;font-weight:bold;"> <a href="">Voir toutes les images</a> <a href=""  style="margin-left:740px;">Voir tous les sons</a>   </p><br>
        <button class="film"> <a class="tooltipped modal-trigger btn right-align" data-title="Ajouter un film" data-target="film_new" data-tooltip="voir" > Ajouter un film</a></button>
        <button class="question"> <a class="tooltipped modal-trigger btn right-align" data-title="Ajouter une question" data-target="question_new" data-tooltip="voir" >Poser une question</a></button>
        <p style="margin-left:30px;font-size:16px;font-weight:bold;"> <a href="">Voir la liste des films</a> <a href="{{ path('question_index',{'idLivre':livre.id}) }}"  style="margin-left:700px;">Voir toutes les questions</a>   </p><br>
        <button class="codeBarre"> <a class="tooltipped modal-trigger btn right-align" data-title="Ajouter un code barre" data-target="codeBarre_new" data-tooltip="voir" > Ajouter un code barre</a></button>
        <button class="conseil"> <a class="tooltipped modal-trigger btn right-align" data-title="Ajouter un conseil" data-target="conseil_new" data-tooltip="voir" >Ajouter un conseil</a></button>
        <p style="margin-left:10px;font-size:16px;font-weight:bold;"><a href="">Voir tous les codes barres</a> <a href=""  style="margin-left:490px;">Voir tous les conseils</a>   </p><br>
        <button class="fiche" > <a class="fruit" href="{{ path('showdetailLivreBase',{'id':livre.id}) }}"> Accéder à la présentation du livre</a> </button>
    </div>
    <div id="modal1" class="modal  modal__box" aria-hidden="true">
        <button  class="closemodal" data-dismiss="modal" style="float:right">
            <span>&times;</span>
        </button>
        <div class="modal-title">
        </div>
        <div class="modal-content">
        </div>
    </div>
    <div  style="width: 100%; position: absolute; top: 150px;">
       <b  style="color:red;font-size:17px;display: block; text-align:center;font-family:Spinnaker;"> {% if messageSucces is defined %} {{ messageSucces}}  {% endif %}</b>
    </div>
    <div>
        <audio src="{{asset(son) }}" Id="audio" controls="controls"  preload="auto" loop="true" autoplay="true" autostart="True"  style="display:none;"></audio>
    </div>
    {%  include('livre/bulle.svg') %}
{% endblock %}
{% block javascripts %}
   <script>
       $(document).ready(function() {
           var lien1="{{ asset('build/images/imgSonStop.png') }}";
           var lien2="{{ asset('build/images/imgSonPlay.png') }}";
           $('#play').click(function () {
               var audio = document.getElementById("audio");
               if (!audio.paused) {
                   audio.pause();
                   audio.currentTime = 0;
                   document.getElementById("play").setAttribute("src", lien1);
               } else {
                   audio.play();
                   document.getElementById("play").setAttribute("src", lien2);
               }
           });
       });

        $(document).ready(function() {
//On écoute le "click" sur le bouton ayant la classe "modal-trigger"
            $('.modal-trigger').click(function () {
                var id="{{ livre.id}}";
                var path= $(this).attr('data-target');
                var titre= $(this).attr('data-title');
                $('.modal-title').html(titre);
                var url = Routing.generate(path,{'id':id}) ;
                $.ajax({
                    type: 'POST',
                    url: url,
                    success: function (data) {
                        //on injecte le html dans la modale
                        $('.modal-content').html(data);
                        //on ouvre la modale
                        $('#modal1').modal('show');
                    }});
            })
        });
        $(function(){
            $('.closemodal').click(function() {
                $('.modal').modal('hide')
            })
        })
        $(document).ready(function() {
            var fruits="{{ fruit }}";
            var feuilles="{{ feuille }}";
            for(let i=1;i<=feuilles;i++){
                document.getElementById("feuille"+i).style.display= "block";
            }
            for(let i=1;i<=fruits;i++){
                document.getElementById("fruit"+i).style.display= "block";
            }

        });
    </script>
{% endblock %}

